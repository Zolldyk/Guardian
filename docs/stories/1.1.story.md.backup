# Story 1.1: Project Setup and uAgents Framework Learning

## Status
Approved

## Story
**As a** developer,
**I want** a working development environment with uAgents framework configured and basic "hello world" agent tested,
**so that** I can build production agents confidently and understand framework capabilities before implementing Guardian's business logic.

## Acceptance Criteria

1. Python 3.10+ virtual environment created with all dependencies installed (uAgents, Pandas, NumPy, pytest)
2. GitHub repository initialized with monorepo structure (agents/, data/, tests/, docs/ folders)
3. requirements.txt file documents all Python dependencies with pinned versions
4. .env.example file created with all required environment variables documented (agent addresses, timeouts, thresholds, logging configuration)
5. GitHub Actions workflow configured (.github/workflows/ci.yml) to run automated tests on push and pull requests
6. GitHub Actions workflow includes linting (ruff), type checking (mypy), and pytest execution with coverage reporting
7. "Hello World" agent successfully created following Innovation Lab guide and deployed to Agentverse testnet
8. Basic inter-agent communication example from Innovation Lab works (two test agents exchange messages successfully)
9. Git repository has initial commit with project structure and working hello world example
10. README.md includes environment setup instructions and links to uAgents documentation
11. Developer can explain uAgents message-passing pattern and agent registration process

## Tasks / Subtasks

- [ ] Task 1: Initialize Git repository and create monorepo structure (AC: 2, 9)
  - [ ] Initialize git repository with `git init`
  - [ ] Create directory structure: agents/, data/, tests/, docs/, scripts/
  - [ ] Create agents/shared/ subdirectory with __init__.py
  - [ ] Create tests/__init__.py
  - [ ] Create .gitignore file with Python-specific ignores (venv/, __pycache__/, *.pyc, .env)
  - [ ] Make initial commit with empty project structure

- [ ] Task 2: Set up Python virtual environment and install dependencies (AC: 1, 3)
  - [ ] Create Python 3.10+ virtual environment: `python -m venv venv`
  - [ ] Activate virtual environment
  - [ ] Create requirements.txt with pinned versions:
    - uagents==0.22.10
    - pandas==2.3.3
    - numpy==2.3.4
    - pytest==8.4.2
    - ruff (latest)
    - mypy==1.18.2
    - python-dotenv==1.1.1
    - hyperon==0.2.8 (for MeTTa integration, future stories)
  - [ ] Install all dependencies: `pip install -r requirements.txt`
  - [ ] Verify installation by running `python --version` and `pip list`

- [ ] Task 3: Create environment configuration template (AC: 4)
  - [ ] Create .env.example file with documented environment variables:
    - GUARDIAN_ADDRESS (assigned by Agentverse on deployment)
    - CORRELATION_AGENT_ADDRESS
    - SECTOR_AGENT_ADDRESS
    - GUARDIAN_SEED (for deterministic address generation)
    - CORRELATION_AGENT_SEED
    - SECTOR_AGENT_SEED
    - METTA_ENABLED=true
    - METTA_KNOWLEDGE_PATH=./data/metta_knowledge/
    - LOG_LEVEL=INFO
  - [ ] Add .env to .gitignore to prevent committing secrets
  - [ ] Document each variable's purpose with inline comments

- [ ] Task 4: Implement "Hello World" agent and test basic uAgents functionality (AC: 7, 8, 11)
  - [ ] Create agents/hello_world_agent.py following Innovation Lab guide
  - [ ] Implement basic agent with message handler
  - [ ] Test agent locally to verify it starts without errors
  - [ ] Deploy hello_world_agent to Agentverse testnet
  - [ ] Create second test agent for inter-agent communication example
  - [ ] Implement message-passing between two test agents
  - [ ] Verify message delivery and response handling
  - [ ] Document learnings about uAgents message-passing pattern in README

- [ ] Task 5: Configure GitHub Actions CI/CD workflow (AC: 5, 6)
  - [ ] Create .github/workflows/ci.yml file
  - [ ] Configure workflow to trigger on push and pull_request events (main/develop branches)
  - [ ] Add job for linting with ruff: `ruff check agents/`
  - [ ] Add job for type checking with mypy: `mypy agents/`
  - [ ] Add job for running pytest with coverage: `pytest --cov=agents --cov-report=xml`
  - [ ] Configure workflow to use Python 3.10+ matrix if needed
  - [ ] Test workflow by pushing to repository and verifying all checks pass

- [ ] Task 6: Create comprehensive README.md documentation (AC: 10)
  - [ ] Document project overview and purpose
  - [ ] Add environment setup instructions:
    - Prerequisites (Python 3.10+, Git, pip)
    - Virtual environment creation
    - Dependency installation from requirements.txt
    - Environment variable configuration (copying .env.example to .env)
  - [ ] Add links to uAgents documentation (Fetch.ai Innovation Lab)
  - [ ] Document development commands (pytest, ruff, mypy)
  - [ ] Add agent deployment instructions for Agentverse
  - [ ] Include notes on message-passing pattern and agent registration

- [ ] Task 7: Unit testing setup and hello world agent tests (AC: 1, 6)
  - [ ] Create tests/test_hello_world.py with basic test cases
  - [ ] Write test for agent initialization
  - [ ] Write test for message handler logic (using unittest.mock)
  - [ ] Run pytest to verify tests pass
  - [ ] Verify coverage reporting works in CI/CD pipeline

## Dev Notes

### Previous Story Insights
This is the first story in Epic 1, so there are no previous story insights to reference.

### Tech Stack Overview
The Guardian project uses the following core technologies for this story:

**Backend Language & Framework:**
- Python 3.10+ (latest 3.14.0 recommended) - Required by uAgents framework [Source: architecture/tech-stack.md#Technology Stack Table]
- uAgents 0.22.10 - Core framework for agent implementation and inter-agent communication (mandatory for ASI Alliance Hackathon) [Source: architecture/tech-stack.md#Technology Stack Table]

**Development Tools:**
- pip + requirements.txt 25.2 - Python package management with version pinning [Source: architecture/tech-stack.md#Technology Stack Table]
- python-dotenv 1.1.1 - Environment variable management from .env files [Source: architecture/tech-stack.md#Technology Stack Table]
- Git 2.51.1 - Version control [Source: architecture/tech-stack.md#Technology Stack Table]

**Testing & Quality:**
- pytest 8.4.2 - Unit tests, integration tests, all Python testing [Source: architecture/tech-stack.md#Technology Stack Table]
- unittest.mock 3.14+ (stdlib) - Mocking uAgents messages in unit tests [Source: architecture/tech-stack.md#Technology Stack Table]
- ruff (latest) - Code quality, style enforcement, fast Python linting [Source: architecture/tech-stack.md#Technology Stack Table]
- mypy 1.18.2 - Static type analysis for Python code [Source: architecture/tech-stack.md#Technology Stack Table]

**CI/CD:**
- GitHub Actions - Automated testing on commit (linting, type checking, unit tests) [Source: architecture/tech-stack.md#Technology Stack Table]

**Data Analysis (for future stories, install now):**
- Pandas 2.3.3 - Portfolio data manipulation, time-series analysis [Source: architecture/tech-stack.md#Technology Stack Table]
- NumPy 2.3.4 - Correlation calculations, statistical operations [Source: architecture/tech-stack.md#Technology Stack Table]

### Repository Structure
The project follows a **monorepo structure** with manual organization (no Nx/Turborepo). All code, tests, data, and documentation reside in a single repository. [Source: architecture/high-level-architecture.md#Repository Structure]

**Directory Layout:**
```
guardian/
├── agents/                      # Agent implementations
│   ├── guardian.py              # Main orchestrator agent (future story)
│   ├── correlation_agent.py     # Correlation analysis specialist (future story)
│   ├── sector_agent.py          # Sector concentration specialist (future story)
│   └── shared/                  # Shared utilities across agents
│       ├── __init__.py
│       ├── metta_interface.py   # MeTTa query abstraction layer (future story)
│       ├── portfolio_utils.py   # Portfolio parsing and data structures (future story)
│       └── config.py            # Shared configuration (future story)
├── data/                        # Data files embedded with agents
│   ├── demo_wallets.json        # Pre-configured demo portfolios (future story)
│   ├── historical_crashes.json  # Market crash scenario data (future story)
│   ├── sector_mappings.json     # Token-to-sector classifications (future story)
│   └── metta_knowledge/         # MeTTa knowledge graph files (.metta) (future story)
├── tests/                       # Test suite
│   ├── __init__.py
│   ├── test_agents.py           # Unit tests for agent logic
│   ├── test_integration.py      # Inter-agent communication tests
│   └── test_metta_queries.py    # MeTTa query accuracy validation (future story)
├── docs/                        # Documentation
│   ├── README.md                # Main project documentation
│   ├── prd/                     # Product requirements (sharded)
│   ├── architecture/            # Architecture documentation (sharded)
│   ├── DEMO.md                  # Demo instructions for judges (future story)
│   └── sample-responses/        # Expected agent responses for demo wallets (future story)
├── scripts/                     # Deployment and utility scripts
│   └── deploy_agents.sh         # Agent deployment automation (future story)
├── .env.example                 # Environment variable template
├── .gitignore                   # Git ignore patterns
├── requirements.txt             # Python dependencies (pinned versions)
└── README.md                    # Root readme
```
[Source: architecture/high-level-architecture.md#Repository Structure]

**Important Note:** For this story, create the complete directory structure but only populate the files required by the acceptance criteria. Empty placeholder directories are acceptable for future stories.

### Environment Configuration
Environment variables are managed using python-dotenv package. All configuration is loaded from a `.env` file (not committed to git).

**Required Environment Variables (for .env.example):**
```bash
# Agent Addresses (assigned by Agentverse on deployment)
GUARDIAN_ADDRESS=agent1qy4mj8k2nqz...
CORRELATION_AGENT_ADDRESS=agent1qw9xth4kl2p...
SECTOR_AGENT_ADDRESS=agent1qx7bvc3mn8s...

# Agent Seeds (for deterministic address generation)
GUARDIAN_SEED=<secret_seed_guardian>
CORRELATION_AGENT_SEED=<secret_seed_correlation>
SECTOR_AGENT_SEED=<secret_seed_sector>

# MeTTa Configuration
METTA_ENABLED=true
METTA_KNOWLEDGE_PATH=./data/metta_knowledge/

# Logging
LOG_LEVEL=INFO
```
[Source: architecture/development-workflow.md#Environment Configuration]

**Security Note:** The .env file must be added to .gitignore to prevent committing secrets. Only .env.example should be committed with placeholder values.

### Development Workflow Commands
These are the standard commands developers will use throughout the project:

**Initial Setup:**
```bash
# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Copy environment template
cp .env.example .env
```
[Source: architecture/development-workflow.md#Local Development Setup]

**Development Commands:**
```bash
# Run unit tests
pytest tests/test_agents.py -v

# Run integration tests (requires deployed agents)
pytest tests/test_integration.py -v

# Run all tests with coverage
pytest --cov=agents --cov-report=html

# Lint code
ruff check agents/

# Type check
mypy agents/

# Run local agent for development (Guardian example)
python agents/guardian.py
```
[Source: architecture/development-workflow.md#Local Development Setup]

### Coding Standards
All code must follow these project-specific rules:

**Naming Conventions:**
- Agent Files: snake_case (e.g., `correlation_agent.py`)
- Agent Names: snake_case (e.g., `correlation_agent`)
- Message Models: PascalCase (e.g., `AnalysisRequest`)
- Message Handlers: snake_case with `handle_` prefix (e.g., `handle_analysis_request`)
- Data Files: kebab-case (e.g., `demo-wallets.json`)
- Environment Variables: SCREAMING_SNAKE_CASE (e.g., `CORRELATION_AGENT_ADDRESS`)

[Source: architecture/coding-standards.md#Naming Conventions]

**Critical Rules (for future stories, but good to understand now):**
- Never hardcode agent addresses - always load from environment variables
- All message handlers must wrap logic in try/except blocks
- All inter-agent messages must be logged at INFO level
- All `ctx.wait_for_message()` calls must specify timeout parameter (default: 10 seconds)

[Source: architecture/coding-standards.md#Critical Fullstack Rules]

### Testing

**Testing Framework:** pytest 8.4.2 [Source: architecture/tech-stack.md#Technology Stack Table]

**Test File Locations:**
- Unit tests: `tests/test_agents.py` [Source: architecture/testing-strategy.md#Unit Tests]
- Integration tests: `tests/test_integration.py` [Source: architecture/testing-strategy.md#Integration Tests]

**Testing Standards for this Story:**
- Create basic unit tests for hello world agent in `tests/test_hello_world.py`
- Use `unittest.mock` (Python stdlib) for mocking uAgents messages and agent context [Source: architecture/tech-stack.md#Technology Stack Table]
- Coverage target: 70% code coverage on critical business logic [Source: architecture/testing-strategy.md#Unit Tests]
- All tests must pass in CI/CD pipeline before merging

**Example Test Pattern:**
```python
import pytest
from unittest.mock import Mock

def test_hello_world_agent_initialization():
    """Test agent initializes without errors."""
    # Test implementation here
    pass
```
[Source: architecture/testing-strategy.md#Unit Tests]

**CI/CD Integration:**
GitHub Actions workflow must include:
- Linting with ruff: `ruff check agents/`
- Type checking with mypy: `mypy agents/`
- Pytest execution with coverage: `pytest --cov=agents --cov-report=xml`
- Workflow triggers on push/PR to main/develop branches

[Source: architecture/tech-stack.md#Technology Stack Table]

### Project Structure Notes
No conflicts identified between epic requirements and architecture. The repository structure defined in the architecture aligns perfectly with AC #2 (monorepo structure with agents/, data/, tests/, docs/ folders).

### Additional Context
**Agentverse Platform:** This is the deployment platform for all agents. For this story, you'll deploy a "hello world" agent to Agentverse testnet to verify the deployment process works. Future stories will deploy production agents (Guardian, CorrelationAgent, SectorAgent). [Source: architecture/high-level-architecture.md#Platform and Infrastructure Choice]

**uAgents Framework Learning:** AC #11 requires understanding the message-passing pattern and agent registration process. Key concepts to document:
- Agents are autonomous entities that communicate via asynchronous message-passing
- Agent registration with Agentverse provides unique addresses (agent1qw...)
- Message handlers are defined using decorators in uAgents framework
- Communication is asynchronous (agents don't block waiting for responses)

[Source: architecture/high-level-architecture.md#Technical Summary]

**Innovation Lab Resources:** Reference Fetch.ai Innovation Lab documentation for:
- uAgents framework tutorials
- Hello world agent examples
- Inter-agent communication patterns
- Agentverse deployment guides

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-18 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent during implementation_

### Debug Log References
_To be populated by dev agent during implementation_

### Completion Notes List
_To be populated by dev agent during implementation_

### File List
_To be populated by dev agent during implementation_

## QA Results
_To be populated by QA agent after story completion_
