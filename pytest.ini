[pytest]
# Pytest configuration for Guardian integration tests
# Story 1.7: Configure detailed logging for agent response review

# Minimum pytest version required (using 8.4.2 from tech-stack.md)
minversion = 7.0

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test markers
markers =
    asyncio: Async tests using asyncio
    hosted: Tests requiring deployed hosted agents on Agentverse (skip locally)
    integration: Integration tests (inter-agent communication)
    unit: Unit tests (isolated function testing)
    slow: Slow tests (>5 seconds)

# Logging configuration (AC 8: Log agent responses for narrative quality review)
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Log file for detailed debugging
log_file = tests/integration_test.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] [%(filename)s:%(lineno)d] %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Test output options
addopts =
    -v
    --strict-markers
    --tb=short
    --color=yes
    -ra
    --capture=no

# Asyncio configuration
asyncio_mode = auto

# Coverage options (optional - uncomment to enable)
# addopts = --cov=agents --cov-report=html --cov-report=term-missing

# Ignore paths
norecursedirs = .git .mypy_cache .pytest_cache .ruff_cache venv __pycache__ .bmad-core .claude

# Show warnings
filterwarnings =
    error
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
